# Продуктовый помошник
[![foodgram workflow](https://github.com/YauheniKr/foodgram-project/actions/workflows/foodgram_workflow.yaml/badge.svg)](https://github.com/YauheniKr/foodgram-project/actions/workflows/foodgram_workflow.yaml)

Это сервис где пользователи могут публиковать рецепты, подписываться на 
публикации других пользователей, добавлять понравившиеся рецепты в список 
«Избранное», а перед походом в магазин скачивать сводный список продуктов, 
необходимых для приготовления одного или нескольких выбранных блюд. 
Приложение доступно по адресу:

http://evgeniy78.tk/


#### Инфраструктура
- Проект работает с СУБД PostgreSQL.
- Проект запущен на сервере в Яндекс.Облаке в трёх контейнерах: nginx, 
  PostgreSQL и Django+Gunicorn.
- Образ для контейнера с проектом обновляется на Docker Hub.
- В nginx настроена раздача статики, остальные запросы переадресуются 
  в Gunicorn.
- Данные сохраняются в volumes

## Установка проекта
Для установки на локальной машине потребуется:
* Скачать файлы проекта из репозитория
* Установить и настроить Docker

## Запуск приложения
В корневом каталоге проекта необходимо собрать и запустить образ из 
прилагающихся dockerfile.
Для этого используем команду:
````
docker-compose up -d --build
````
После успешного выполнения команды, приложение запущено и 
необходимо выполнить миграции БД, собрать статику и загрузить исходные 
ингредиенты и их размерностей. 
Для этого используются команды:
- для сбора статических файлов:
````
sudo docker-compose exec -T web python3 manage.py collectstatic --noinput
````
- для миграции БД:
````
sudo docker-compose exec -T web python3 manage.py migrate --noinput
````
- для загрузки исходных ингредиентов и их размерностей
````
sudo docker-compose exec -T web python3 manage.py load_test_data
````
После этого необходимо создать суперпользователя. Для этого применяем получаем доступ к консоли контейнера web и 
далее применяем команду создания суперпользователя:
- доступ в консоль контейнера web:
````
sudo docker-compose exec -T web 
````
- запускаем команду в результате исполнения которой 
  будет создан суперпользователь:
````
python manage.py createsuperuser
````
Приложение запущено и готово к использованию.